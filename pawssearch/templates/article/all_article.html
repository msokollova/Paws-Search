{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2 class="w3-center w3-text-blue-gray">Статии</h2>
<div class="w3-container">

    {% if user.is_staff %}
        <div class="w3-right w3-margin">
            <a href="{% url 'add article' %}" class="w3-button w3-round-large w3-cyan w3-text-light-grey w3-hover-text-black w3-hover-cyan">Добави</a>
        </div>
    {% endif %}

    <!-- New Parent Container with Padding -->
    <div class="w3-container w3-padding-large cards">

        <div class="w3-row-padding w3-margin-top">
            {% for article in articles %}
                <div class="w3-third w3-margin-bottom">
                    <div class="w3-card w3-hover-shadow" style="height: 100%; display: flex; flex-direction: column;">
                        
                        <!-- Image Section -->
                        <a href="{{ article.url }}" target="_blank">
                            <img src="{% if article.image %}{{ article.image }}{% else %}{% static 'images/articles.png' %}{% endif %}" 
                                 alt="{{ article.title }}" class="w3-image" style="width:100%; height: 200px; object-fit: cover;">
                        </a>
                        
                        <!-- Title Section -->
                        <div class="w3-container" style="flex-grow: 1;">
                            <h5 class="w3-center" style="min-height: 60px; overflow: hidden; text-align: center; font-weight: bold;">
                                {{ article.title }}
                            </h5>
                        </div>
                        
                        <!-- Edit/Delete Buttons for Staff -->
                        {% if user.is_staff %}
                            <div class="w3-container w3-padding-small w3-center">
                                <a href="{% url 'edit article' article.pk %}"
                                   class="w3-button w3-round-large w3-teal w3-text-light-grey w3-hover-text-black w3-hover-teal w3-margin-small">Редактиране</a>
                                <a href="{% url 'delete article' article.pk %}"
                                   class="w3-button w3-round-large w3-deep-orange w3-text-light-grey w3-hover-text-black w3-hover-deep-orange w3-margin-small">Изтриване</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>

    </div>
</div>
{% endblock %}
