{% extends 'base.html' %}

{% block content %}
    <h2 class="w3-text-light-grey w3-center w3-black w3-margin h2">Details</h2>
    <div class="w3-container">
        <!-- Post Information -->
        <div class="w3-card-4">
            <div class="w3-container w3-padding w3-round w3-margin">
                {% if post.image %}
                    <div class="w3-row" style="display: flex; align-items: stretch;">
                        <div class="w3-col s3" style="flex-shrink: 0;">
                            <img src="{{ post.image }}" alt="post_photo" class="w3-round"
                                 style="width:95%; height: 95%; object-fit: cover;">
                        </div>
                        <div class="w3-col s9" style="flex-grow: 1;">
                            <p><strong>Title:</strong> {{ post.title }}</p>
                            <p><strong>Pet:</strong> {{ post.get_pet_type_display }}</p>
                            <p><strong>Type:</strong> {{ post.get_post_type_display }}</p>
                            <p><strong>Status:</strong> {{ post.is_active|yesno:"Active,Inactive" }}</p>
                            <p><strong>Region:</strong> {{ post.get_region_display }}</p>
                            <p><strong>Published on:</strong> {{ post.pub_date|date:"d M, Y" }}</p>
                            <p><strong>Followers:</strong> {{ follower_count }}</p>
                        </div>
                    </div>
                {% else %}
                    <p><strong>Pet:</strong> {{ post.get_pet_type_display }}</p>
                    <p><strong>Type:</strong> {{ post.get_post_type_display }}</p>
                    <p><strong>Status:</strong> {{ post.is_active|yesno:"Active,Inactive" }}</p>
                    <p><strong>Region:</strong> {{ post.get_region_display }}</p>
                    <p><strong>Published on:</strong> {{ post.pub_date|date:"d M, Y" }}</p>
                    <p><strong>Followers:</strong> {{ follower_count }}</p>
                {% endif %}
                <p style="word-wrap: break-word; white-space: pre-wrap;"><strong>Description: </strong>{{ post.description }}
                </p>
            </div>
        </div>

        <!-- Comments Section -->
        <h3 class="w3-center">Comments</h3>

        {% if comments %}
            <div class="w3-row">
                {% for comment in comments %}
                    <div class="w3-card w3-margin w3-padding">
                        <p><strong>{{ comment.user.username }}</strong> on {{ comment.pub_date|date:"d M, Y" }}</p>
                        <p>{{ comment.comment }}</p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="w3-center">No comments yet.</p>
        {% endif %}
        <div class="w3-center">
            <a href="{% url 'user posts' %}"
               class="w3-button w3-round-large w3-cyan w3-text-light-grey w3-hover-text-black w3-hover-cyan">Back</a>
            <a href="{% url 'edit post' post.pk %}"
               class="w3-button w3-round-large w3-teal w3-text-light-grey w3-hover-text-black w3-hover-teal">Edit</a>
        </div>
    </div>
{% endblock %}
